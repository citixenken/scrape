require 'json'
require 'nokogiri'
require 'open-uri'
require 'pry'
require 'json'

def create_article_hash
    url = 'https://arstechnica.com/'
    html = URI.open(url)
    parsed_page = Nokogiri::HTML(html)
    published_articles = parsed_page.css('li.tease.article')

    articles = Array.new
    
    published_articles.each do |published_article|
        
        article = {
            title: published_article.css('header h2 a').text,
            web_url: published_article.css('header h2 a').attribute('href').value,
            byline: published_article.css('header p.excerpt').text,
            author: published_article.css('header p.byline a span').text,
            date_published: published_article.css('header p.byline time.date').text
        }
        articles << article
        # binding.pry
    end

    articles

    Article.destroy_all

    puts "🌱 Seeding articles..."

    Article.create(articles)

    puts "✅ Done seeding!"
end

create_article_hash











# Article.create([{"title":"Review: Lenovo’s ThinkPad Z13 is a bit weird, but Ryzen 6000 is fantastic","web_url":"https://arstechnica.com/gadgets/2022/09/lenovo-thinkpad-z13-review-amds-ryzen-chips-are-the-best-part-of-an-oddball-laptop/","byline":"The best ThinkPad qualities are sadly diluted, but performance is fantastic.","author":"Andrew Cunningham","date_published":"Sep 5, 2022 11:45 am UTC"},{"title":"In New Zealand, conservation is buoyed by Indigenous knowledge","web_url":"https://arstechnica.com/science/2022/09/in-new-zealand-conservation-is-buoyed-by-indigenous-knowledge/","byline":"Blending Māori knowledge into federally funded crayfish research makes for better science.","author":"Rina Diane Caballar, Undark Magazine","date_published":"Sep 5, 2022 12:00 pm UTC"},{"title":"Celibacy has surprising evolutionary advantages, according to new research","web_url":"https://arstechnica.com/science/2022/09/celibacy-its-surprising-evolutionary-advantages-according-to-new-research/","byline":"A study on the consequences of becoming a monk related to evolutionary fitness.","author":"Ruth Mace and Alberto Micheletti, The Conversation","date_published":"Sep 5, 2022 11:30 am UTC"},{"title":"How sustainable are fake meats?","web_url":"https://arstechnica.com/science/2022/09/how-sustainable-are-fake-meats/","byline":"Checking whether plant-based burgers may have lighter environmental footprints. ","author":"Bob Holmes, Knowable Magazine","date_published":"Sep 4, 2022 12:30 pm UTC"},{"title":"Examining the game industry’s hidden impacts on climate change","web_url":"https://arstechnica.com/gaming/2022/09/examining-the-game-industrys-hidden-impacts-on-climate-change/","byline":"Researcher Ben Abraham lays out how the game industry can lessen its carbon footprint.","author":"Daniel Starkey","date_published":"Sep 4, 2022 12:00 pm UTC"},{"title":"Years after shuttle, NASA rediscovers the perils of liquid hydrogen","web_url":"https://arstechnica.com/science/2022/09/years-after-shuttle-nasa-rediscovers-the-perils-of-liquid-hydrogen/","byline":"\"Every time we saw a leak, it pretty quickly exceeded our flammability limits.\"","author":"Eric Berger","date_published":"Sep 3, 2022 10:38 pm UTC"},{"title":"All the best Labor Day tech deals we can find this weekend","web_url":"https://arstechnica.com/staff/2022/09/best-labor-day-tech-deals/","byline":"Dealmaster includes MacBook Pros, OLED TVs, AirPods Max, video games freebies, and more.","author":"Jeff Dunn","date_published":"Sep 3, 2022 6:01 pm UTC"},{"title":"NASA scrubs second attempt to launch Artemis I after hydrogen leak [Updated]","web_url":"https://arstechnica.com/science/2022/09/nasa-making-second-attempt-to-launch-the-sls-rocket/","byline":"Hydrogen—it leaks.","author":"Eric Berger","date_published":"Sep 3, 2022 3:15 pm UTC"},{"title":"Liveblog: All the news from Apple’s “Far Out” event","web_url":"https://arstechnica.com/gadgets/2022/09/liveblog-all-the-news-from-apples-far-out-event/","byline":"Tune in at 1 pm EST on September 7, 2022, to see what's next from Apple.","author":"Samuel Axon","date_published":"Sep 3, 2022 12:00 pm UTC"},{"title":"How a giant eagle came to dominate ancient New Zealand","web_url":"https://arstechnica.com/science/2022/09/how-a-giant-eagle-came-to-dominate-ancient-new-zealand/","byline":"Evidence suggests eagle was part of a wave of feathered invaders.","author":"Boyce Upholt, Knowable Magazine","date_published":"Sep 3, 2022 11:00 am UTC"},{"title":"YouTube algorithm pushed election fraud claims to Trump supporters, report says","web_url":"https://arstechnica.com/tech-policy/2022/09/youtube-algorithm-pushed-election-fraud-claims-to-trump-supporters-report-says/","byline":"Researchers analyzed real recommendations to hundreds of YouTube users.","author":"Ashley Belanger","date_published":"Sep 2, 2022 7:20 pm UTC"},{"title":"Here come the bendable TVs and monitors that no one asked for","web_url":"https://arstechnica.com/gadgets/2022/09/here-come-the-bendable-tvs-and-monitors-that-no-one-asked-for/","byline":"Flat-to-curved screens have an identity crisis.","author":"Scharon Harding","date_published":"Sep 2, 2022 5:58 pm UTC"},{"title":"Google launches third-party Play Store billing pilot—but only cuts fees by 4%","web_url":"https://arstechnica.com/gadgets/2022/09/google-launches-third-party-play-store-billing-pilot-but-only-cuts-fees-by-4/","byline":"It's not in the US, it's not for games, and devs will only save 4 percent.","author":"Ron Amadeo","date_published":"Sep 2, 2022 5:26 pm UTC"},{"title":"T-Mobile dominates 2.5 GHz spectrum auction to fill in network gaps across US","web_url":"https://arstechnica.com/tech-policy/2022/09/t-mobile-dominates-2-5-ghz-spectrum-auction-to-fill-in-network-gaps-across-us/","byline":"T-Mobile spends $304 million to win over 90% of available 2.5 GHz licenses.","author":"Jon Brodkin","date_published":"Sep 2, 2022 5:07 pm UTC"},{"title":"EU regulators want 5 years of smartphone parts, much better batteries","web_url":"https://arstechnica.com/gadgets/2022/09/eu-regulators-want-5-years-of-smartphone-parts-much-better-batteries/","byline":"Requiring parts and manuals access part of broader environmental initiative.","author":"Kevin Purdy","date_published":"Sep 2, 2022 4:55 pm UTC"},{"title":"Frank Drake, astronomer famed for contributions to SETI, has died","web_url":"https://arstechnica.com/science/2022/09/frank-drake-astronomer-famed-for-contributions-to-seti-has-died/","byline":"The equation named after him helps organize our thoughts on extraterrestrial life.","author":"John Timmer","date_published":"Sep 2, 2022 4:30 pm UTC"},{"title":"Valve bars Steam developer who posted anti-trans rant in patch notes","web_url":"https://arstechnica.com/gaming/2022/09/valve-bars-steam-developer-who-posted-anti-trans-rant-in-patch-notes/","byline":"Dev demeaned a trans streamer in a post joking about a \"sex change\" for the game.","author":"Kyle Orland","date_published":"Sep 2, 2022 4:17 pm UTC"},{"title":"I’m still worried about Diablo IV’s cosmetic-only microtransactions","web_url":"https://arstechnica.com/gaming/2022/09/im-still-worried-about-diablo-ivs-cosmetic-only-microtransactions/","byline":"I want to find—not buy—my cool-looking loot.","author":"Aaron Zimmerman","date_published":"Sep 2, 2022 2:36 pm UTC"},{"title":"CDC recommends BA.4/5-targeting COVID boosters from Moderna and Pfizer [Updated]","web_url":"https://arstechnica.com/science/2022/09/fda-authorizes-omicron-targeting-covid-boosters-from-moderna-and-pfizer/","byline":"The new boosters are expected to start going into arms around Labor Day. ","author":"Beth Mole","date_published":"Sep 2, 2022 2:05 pm UTC"},{"title":"These beetles tuck bacteria buddies in “back pockets” during metamorphosis","web_url":"https://arstechnica.com/science/2022/09/these-beetles-tuck-symbiotic-bacteria-in-back-pockets-during-metamorphosis/","byline":"When adult females emerge from pupae, friction shuffles the bacteria to genital area.","author":"Jennifer Ouellette","date_published":"Sep 2, 2022 1:21 pm UTC"},{"title":"The Grand Cherokee 4xe is a great Jeep and a solid hybrid","web_url":"https://arstechnica.com/cars/2022/09/the-grand-cherokee-4xe-is-a-great-jeep-and-a-solid-hybrid/","byline":"Jeep's first plug-in hybrid SUV hits the mark on ride quality, comfort.","author":"Eric Bangeman","date_published":"Sep 2, 2022 11:22 am UTC"},{"title":"Rocket Report: Used Electron engine gets retested; Canadian spaceport is a go","web_url":"https://arstechnica.com/science/2022/09/rocket-report-used-electron-engine-gets-re-tested-canadian-spaceport-is-a-go/","byline":"\"We are working together with commercial space companies and growing the economy.\"","author":"Eric Berger","date_published":"Sep 2, 2022 11:00 am UTC"},{"title":"Breaking down how USB4 goes where no USB standard has gone before","web_url":"https://arstechnica.com/gadgets/2022/09/breaking-down-how-usb4-goes-where-no-usb-standard-has-gone-before/","byline":"USB4 vs. Thunderbolt 4—and everything else to know about the newest USB standard.","author":"Scharon Harding","date_published":"Sep 2, 2022 10:40 am UTC"},{"title":"Actors behind PyPI supply chain attack have been active since late 2021","web_url":"https://arstechnica.com/information-technology/2022/09/actors-behind-pypi-supply-chain-attack-have-been-active-since-late-2021/","byline":"Group that pulled off successful attack on PyPI has humble origins.","author":"Dan Goodin","date_published":"Sep 1, 2022 11:11 pm UTC"},{"title":"Cops wanted to keep mass surveillance app secret; privacy advocates refused","web_url":"https://arstechnica.com/tech-policy/2022/09/cops-wanted-to-keep-mass-surveillance-app-secret-privacy-advocates-refused/","byline":"Fog Reveal is \"almost invisible\" when attempting to search for it online.","author":"Ashley Belanger","date_published":"Sep 1, 2022 10:56 pm UTC"},{"title":"Lenovo announces consumer AR glasses that can tether to iPhones","web_url":"https://arstechnica.com/gadgets/2022/09/lenovos-first-consumer-ar-glasses-to-debut-this-year-with-micro-oled-displays/","byline":"Lenovo dangles a platform-agnostic carrot in front of AR hopefuls. ","author":"Scharon Harding","date_published":"Sep 1, 2022 9:56 pm UTC"},{"title":"State forces Frontier to stop charging $7 “Internet Infrastructure Surcharge”","web_url":"https://arstechnica.com/tech-policy/2022/09/frontier-must-end-sneaky-7-internet-infrastructure-fee-in-deal-with-conn/","byline":"Users won't get refunds for hidden fee, but deal in Conn. imposes other conditions.","author":"Jon Brodkin","date_published":"Sep 1, 2022 8:03 pm UTC"},{"title":"USB-C naming to somehow get worse with USB4 Version 2.0","web_url":"https://arstechnica.com/gadgets/2022/09/usb-c-naming-to-somehow-get-worse-with-usb4-version-2-0/","byline":"USB-C is getting yet another specification. ","author":"Scharon Harding","date_published":"Sep 1, 2022 7:49 pm UTC"},{"title":"Pixel art comes to life: Fan upgrades classic MS-DOS games with AI","web_url":"https://arstechnica.com/gaming/2022/09/pixel-art-comes-to-life-fan-upgrades-classic-ms-dos-games-with-ai/","byline":"A technique called \"img2img\" can upgrade pixel artwork into high definition.","author":"Benj Edwards","date_published":"Sep 1, 2022 7:40 pm UTC"},{"title":"The cancellation of Halo Infinite’s split-screen co-op changes my review","web_url":"https://arstechnica.com/gaming/2022/09/microsoft-breaks-pledge-cancels-split-screen-halo-infinite-multiplayer/","byline":"Business-as-usual for some modern FPSes, but MS's 2017 pledge makes this one different.","author":"Sam Machkovech","date_published":"Sep 1, 2022 6:03 pm UTC"},{"title":"UK challenges $69B Microsoft/Activision deal, citing potential harm to gamers","web_url":"https://arstechnica.com/tech-policy/2022/09/uk-challenges-69b-microsoft-activision-deal-citing-potential-harm-to-gamers/","byline":"UK: Deal could harm competition in consoles, subscription services, and streaming.","author":"Jon Brodkin","date_published":"Sep 1, 2022 5:53 pm UTC"},{"title":"E-bike battery fires pushing NYC toward a ban in public housing","web_url":"https://arstechnica.com/tech-policy/2022/09/e-bike-battery-fires-pushing-nyc-toward-a-ban-in-public-housing/","byline":"Poorly made cells, tough work, and lack of space all contribute to deadly rise.","author":"Kevin Purdy","date_published":"Sep 1, 2022 5:45 pm UTC"},{"title":"As heat wave threatens power crisis, California extends life of nuke plant","web_url":"https://arstechnica.com/science/2022/09/as-state-heats-up-california-extends-operation-of-its-last-nuclear-plant/","byline":"Legislature approves plan to give Diablo Canyon another five years.","author":"John Timmer","date_published":"Sep 1, 2022 5:34 pm UTC"},{"title":"Arm sues Qualcomm, wants it to “destroy” Nuvia’s pre-acquisition CPU designs","web_url":"https://arstechnica.com/gadgets/2022/09/arm-sues-qualcomm-over-its-1-4-billion-nuvia-acquisition/","byline":"Arm says Qualcomm's Nuvia acquisition is a breach of its license terms.","author":"Ron Amadeo","date_published":"Sep 1, 2022 5:25 pm UTC"},{"title":"Ubisoft delays server shutdowns, prevents purchased DLC from going away","web_url":"https://arstechnica.com/gaming/2022/09/ubisoft-delays-server-shutdowns-prevents-purchased-dlc-from-going-away/","byline":"Plus, Anno 2070 devs update server infrastructure to work indefinitely.","author":"Kyle Orland","date_published":"Sep 1, 2022 4:15 pm UTC"},{"title":"Old iPhones and iPads stuck on iOS 12 get a patch for a serious security hole","web_url":"https://arstechnica.com/gadgets/2022/09/apple-releases-rare-ios-12-update-to-patch-zero-day-webkit-vulnerability/","byline":"Apple stopped releasing regular updates for iOS 12 around when iOS 15 came out.","author":"Andrew Cunningham","date_published":"Sep 1, 2022 3:18 pm UTC"}])